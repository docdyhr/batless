[38;2;249;38;114muse[0m[38;2;248;248;242m [0m[38;2;248;248;242mbatless[0m[38;2;248;248;242m::[0m[38;2;248;248;242m{[0m[38;2;248;248;242mdetect_language[0m[38;2;248;248;242m,[0m[38;2;248;248;242m highlight_content[0m[38;2;248;248;242m,[0m[38;2;248;248;242m process_file[0m[38;2;248;248;242m,[0m[38;2;248;248;242m BatlessConfig[0m[38;2;248;248;242m}[0m[38;2;248;248;242m;[0m
[38;2;249;38;114muse[0m[38;2;248;248;242m [0m[38;2;248;248;242mclap[0m[38;2;248;248;242m::[0m[38;2;248;248;242m{[0m[38;2;248;248;242mParser[0m[38;2;248;248;242m,[0m[38;2;248;248;242m ValueEnum[0m[38;2;248;248;242m}[0m[38;2;248;248;242m;[0m
[38;2;249;38;114muse[0m[38;2;248;248;242m [0m[38;2;248;248;242mis_terminal[0m[38;2;248;248;242m::[0m[38;2;248;248;242mIsTerminal[0m[38;2;248;248;242m;[0m
[38;2;249;38;114muse[0m[38;2;248;248;242m [0m[38;2;248;248;242mserde_json[0m[38;2;248;248;242m::[0m[38;2;248;248;242mjson[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242mderive[0m[38;2;248;248;242m([0m[38;2;248;248;242mParser[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242mcommand[0m[38;2;248;248;242m([0m[38;2;248;248;242mauthor[0m[38;2;248;248;242m,[0m[38;2;248;248;242m version[0m[38;2;248;248;242m,[0m[38;2;248;248;242m about[0m[38;2;248;248;242m,[0m[38;2;248;248;242m long_about [0m[38;2;249;38;114m=[0m[38;2;248;248;242m None[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;102;217;239mstruct[0m[38;2;248;248;242m [0m[38;2;166;226;46mArgs[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m File to view[0m
[38;2;248;248;242m    [0m[38;2;255;255;255mfile[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mOption[0m[38;2;248;248;242m<[0m[38;2;166;226;46mString[0m[38;2;248;248;242m>[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Language for syntax highlighting (auto-detect if not specified)[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mlanguage[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mOption[0m[38;2;248;248;242m<[0m[38;2;166;226;46mString[0m[38;2;248;248;242m>[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Limit lines shown[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m,[0m[38;2;248;248;242m default_value [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;230;219;116m"[0m[38;2;230;219;116m10000[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mmax_lines[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239musize[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Limit bytes shown[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mmax_bytes[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;166;226;46mOption[0m[38;2;248;248;242m<[0m[38;2;102;217;239musize[0m[38;2;248;248;242m>[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Output mode[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m,[0m[38;2;248;248;242m value_enum[0m[38;2;248;248;242m,[0m[38;2;248;248;242m default_value [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;230;219;116m"[0m[38;2;230;219;116mhighlight[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mmode[0m[38;2;248;248;242m:[0m[38;2;248;248;242m OutputMode,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Color output control[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m,[0m[38;2;248;248;242m value_enum[0m[38;2;248;248;242m,[0m[38;2;248;248;242m default_value [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;230;219;116m"[0m[38;2;230;219;116mauto[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mcolor[0m[38;2;248;248;242m:[0m[38;2;248;248;242m ColorMode,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Theme for syntax highlighting[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m,[0m[38;2;248;248;242m default_value [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;230;219;116m"[0m[38;2;230;219;116mbase16-ocean.dark[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mtheme[0m[38;2;248;248;242m:[0m[38;2;248;248;242m String,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Strip ANSI escape codes from output[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mstrip_ansi[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mbool[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m List all supported languages[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mlist_languages[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mbool[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m List all available themes[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255mlist_themes[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mbool[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Include tokens in JSON output (AI-friendly)[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255minclude_tokens[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mbool[0m[38;2;248;248;242m,[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m///[0m[38;2;117;113;94m Summary mode: show only important code structures[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242marg[0m[38;2;248;248;242m([0m[38;2;248;248;242mlong[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;248;248;242m    [0m[38;2;255;255;255msummary[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;102;217;239mbool[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m}[0m

[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242mderive[0m[38;2;248;248;242m([0m[38;2;248;248;242mCopy[0m[38;2;248;248;242m,[0m[38;2;248;248;242m Clone[0m[38;2;248;248;242m,[0m[38;2;248;248;242m PartialEq[0m[38;2;248;248;242m,[0m[38;2;248;248;242m Eq[0m[38;2;248;248;242m,[0m[38;2;248;248;242m PartialOrd[0m[38;2;248;248;242m,[0m[38;2;248;248;242m Ord[0m[38;2;248;248;242m,[0m[38;2;248;248;242m ValueEnum[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;102;217;239menum[0m[38;2;248;248;242m [0m[38;2;166;226;46mOutputMode[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    Plain[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    Highlight[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    Json[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    Summary[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m}[0m

[38;2;248;248;242m#[0m[38;2;248;248;242m[[0m[38;2;248;248;242mderive[0m[38;2;248;248;242m([0m[38;2;248;248;242mCopy[0m[38;2;248;248;242m,[0m[38;2;248;248;242m Clone[0m[38;2;248;248;242m,[0m[38;2;248;248;242m PartialEq[0m[38;2;248;248;242m,[0m[38;2;248;248;242m Eq[0m[38;2;248;248;242m,[0m[38;2;248;248;242m PartialOrd[0m[38;2;248;248;242m,[0m[38;2;248;248;242m Ord[0m[38;2;248;248;242m,[0m[38;2;248;248;242m ValueEnum[0m[38;2;248;248;242m)[0m[38;2;248;248;242m][0m
[38;2;102;217;239menum[0m[38;2;248;248;242m [0m[38;2;166;226;46mColorMode[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    Auto[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    Always[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    Never[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m}[0m

[38;2;102;217;239mfn[0m[38;2;248;248;242m [0m[38;2;166;226;46mmain[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m->[0m[38;2;248;248;242m [0m[38;2;166;226;46mResult[0m[38;2;248;248;242m<[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m, [0m[38;2;166;226;46mBox[0m[38;2;248;248;242m<[0m[38;2;248;248;242mdyn [0m[38;2;248;248;242mstd[0m[38;2;248;248;242m::[0m[38;2;248;248;242merror[0m[38;2;248;248;242m::[0m[38;2;248;248;242mError[0m[38;2;248;248;242m>[0m[38;2;248;248;242m>[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m args [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;248;248;242mArgs[0m[38;2;248;248;242m::[0m[38;2;248;248;242mparse[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Handle list commands first[0m
[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlist_languages [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mfor[0m[38;2;248;248;242m language [0m[38;2;249;38;114min[0m[38;2;248;248;242m [0m[38;2;248;248;242mbatless[0m[38;2;248;248;242m::[0m[38;2;248;248;242mlist_languages[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{language}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mreturn[0m[38;2;248;248;242m [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlist_themes [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mfor[0m[38;2;248;248;242m theme [0m[38;2;249;38;114min[0m[38;2;248;248;242m [0m[38;2;248;248;242mbatless[0m[38;2;248;248;242m::[0m[38;2;248;248;242mlist_themes[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{theme}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mreturn[0m[38;2;248;248;242m [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Require file for other operations[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m file_path [0m[38;2;249;38;114m=[0m[38;2;248;248;242m args[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m.[0m[38;2;248;248;242mfile[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m.[0m[38;2;102;217;239mas_ref[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m.[0m[38;2;102;217;239mok_or[0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;230;219;116mFile path required (unless using --list-languages or --list-themes)[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Determine if we should use color[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m use_color [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;249;38;114mmatch[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mcolor [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mColorMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mAlways [0m[38;2;249;38;114m=>[0m[38;2;248;248;242m [0m[38;2;190;132;255mtrue[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mColorMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mNever [0m[38;2;249;38;114m=>[0m[38;2;248;248;242m [0m[38;2;190;132;255mfalse[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mColorMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mAuto [0m[38;2;249;38;114m=>[0m[38;2;248;248;242m [0m[38;2;248;248;242mstd[0m[38;2;248;248;242m::[0m[38;2;248;248;242mio[0m[38;2;248;248;242m::[0m[38;2;248;248;242mstdout[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m.[0m[38;2;102;217;239mis_terminal[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Create configuration[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m config [0m[38;2;249;38;114m=[0m[38;2;248;248;242m BatlessConfig [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        max_lines[0m[38;2;248;248;242m:[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mmax_lines[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        max_bytes[0m[38;2;248;248;242m:[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mmax_bytes[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        language[0m[38;2;248;248;242m:[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlanguage[0m[38;2;248;248;242m.[0m[38;2;102;217;239mclone[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        theme[0m[38;2;248;248;242m:[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtheme[0m[38;2;248;248;242m.[0m[38;2;102;217;239mclone[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        strip_ansi[0m[38;2;248;248;242m:[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mstrip_ansi[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        use_color[0m[38;2;248;248;242m:[0m[38;2;248;248;242m use_color[0m
[38;2;248;248;242m            [0m[38;2;249;38;114m&&[0m[38;2;248;248;242m [0m[38;2;248;248;242m([0m[38;2;248;248;242margs[0m[38;2;248;248;242m.[0m[38;2;248;248;242mmode [0m[38;2;249;38;114m==[0m[38;2;248;248;242m [0m[38;2;248;248;242mOutputMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mHighlight [0m[38;2;249;38;114m||[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mmode [0m[38;2;249;38;114m==[0m[38;2;248;248;242m [0m[38;2;248;248;242mOutputMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mSummary[0m[38;2;248;248;242m)[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        include_tokens[0m[38;2;248;248;242m:[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242minclude_tokens[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        summary_mode[0m[38;2;248;248;242m:[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242msummary [0m[38;2;249;38;114m||[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mmode [0m[38;2;249;38;114m==[0m[38;2;248;248;242m [0m[38;2;248;248;242mOutputMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mSummary[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mmatch[0m[38;2;248;248;242m args[0m[38;2;248;248;242m.[0m[38;2;248;248;242mmode [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mOutputMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mPlain [0m[38;2;249;38;114m=>[0m[38;2;248;248;242m [0m[38;2;102;217;239mhandle_plain_output[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mconfig[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mOutputMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mHighlight [0m[38;2;249;38;114m=>[0m[38;2;248;248;242m [0m[38;2;102;217;239mhandle_highlight_output[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mconfig[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mOutputMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mJson [0m[38;2;249;38;114m=>[0m[38;2;248;248;242m [0m[38;2;102;217;239mhandle_json_output[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mconfig[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mOutputMode[0m[38;2;248;248;242m::[0m[38;2;248;248;242mSummary [0m[38;2;249;38;114m=>[0m[38;2;248;248;242m [0m[38;2;102;217;239mhandle_summary_output[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mconfig[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m
[38;2;248;248;242m}[0m

[38;2;102;217;239mfn[0m[38;2;248;248;242m [0m[38;2;166;226;46mhandle_plain_output[0m[38;2;248;248;242m([0m
[38;2;248;248;242m    [0m[38;2;253;151;31mfile_path[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;102;217;239mstr[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    [0m[38;2;253;151;31mconfig[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mBatlessConfig,[0m
[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m->[0m[38;2;248;248;242m [0m[38;2;166;226;46mResult[0m[38;2;248;248;242m<[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m, [0m[38;2;166;226;46mBox[0m[38;2;248;248;242m<[0m[38;2;248;248;242mdyn [0m[38;2;248;248;242mstd[0m[38;2;248;248;242m::[0m[38;2;248;248;242merror[0m[38;2;248;248;242m::[0m[38;2;248;248;242mError[0m[38;2;248;248;242m>[0m[38;2;248;248;242m>[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m file_info [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;102;217;239mprocess_file[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m config[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mfor[0m[38;2;248;248;242m line [0m[38;2;249;38;114min[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mfile_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlines [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mif[0m[38;2;248;248;242m config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mstrip_ansi [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;248;248;242mstrip_ansi_escapes[0m[38;2;248;248;242m::[0m[38;2;248;248;242mstrip_str[0m[38;2;248;248;242m([0m[38;2;248;248;242mline[0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m[38;2;248;248;242m [0m[38;2;249;38;114melse[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{line}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtruncated_by_bytes [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;230;219;116m// Output truncated after [0m[38;2;190;132;255m{}[0m[38;2;230;219;116m bytes[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtotal_bytes[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtruncated_by_lines [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;230;219;116m// Output truncated after [0m[38;2;190;132;255m{}[0m[38;2;230;219;116m lines[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtotal_lines[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m
[38;2;248;248;242m}[0m

[38;2;102;217;239mfn[0m[38;2;248;248;242m [0m[38;2;166;226;46mhandle_highlight_output[0m[38;2;248;248;242m([0m
[38;2;248;248;242m    [0m[38;2;253;151;31mfile_path[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;102;217;239mstr[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    [0m[38;2;253;151;31mconfig[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mBatlessConfig,[0m
[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m->[0m[38;2;248;248;242m [0m[38;2;166;226;46mResult[0m[38;2;248;248;242m<[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m, [0m[38;2;166;226;46mBox[0m[38;2;248;248;242m<[0m[38;2;248;248;242mdyn [0m[38;2;248;248;242mstd[0m[38;2;248;248;242m::[0m[38;2;248;248;242merror[0m[38;2;248;248;242m::[0m[38;2;248;248;242mError[0m[38;2;248;248;242m>[0m[38;2;248;248;242m>[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m [0m[38;2;249;38;114m![0m[38;2;248;248;242mconfig[0m[38;2;248;248;242m.[0m[38;2;248;248;242muse_color [0m[38;2;249;38;114m||[0m[38;2;248;248;242m config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mstrip_ansi [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Fall back to plain output[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mreturn[0m[38;2;248;248;242m [0m[38;2;102;217;239mhandle_plain_output[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m config[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m file_info [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;102;217;239mprocess_file[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m config[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m content [0m[38;2;249;38;114m=[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlines[0m[38;2;248;248;242m.[0m[38;2;102;217;239mjoin[0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m\n[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m [0m[38;2;249;38;114m![0m[38;2;248;248;242mcontent[0m[38;2;248;248;242m.[0m[38;2;102;217;239mis_empty[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m highlighted [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;102;217;239mhighlight_content[0m[38;2;248;248;242m([0m[38;2;249;38;114m&[0m[38;2;248;248;242mcontent[0m[38;2;248;248;242m,[0m[38;2;248;248;242m file_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m config[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mprint![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{highlighted}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m        [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Add newline if content doesn't end with one[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mif[0m[38;2;248;248;242m [0m[38;2;249;38;114m![0m[38;2;248;248;242mcontent[0m[38;2;248;248;242m.[0m[38;2;102;217;239mends_with[0m[38;2;248;248;242m([0m[38;2;230;219;116m'[0m[38;2;190;132;255m\n[0m[38;2;230;219;116m'[0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtruncated_by_bytes [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;230;219;116m// Output truncated after [0m[38;2;190;132;255m{}[0m[38;2;230;219;116m bytes[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtotal_bytes[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtruncated_by_lines [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;230;219;116m// Output truncated after [0m[38;2;190;132;255m{}[0m[38;2;230;219;116m lines[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtotal_lines[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m
[38;2;248;248;242m}[0m

[38;2;102;217;239mfn[0m[38;2;248;248;242m [0m[38;2;166;226;46mhandle_json_output[0m[38;2;248;248;242m([0m
[38;2;248;248;242m    [0m[38;2;253;151;31mfile_path[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;102;217;239mstr[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    [0m[38;2;253;151;31mconfig[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mBatlessConfig,[0m
[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m->[0m[38;2;248;248;242m [0m[38;2;166;226;46mResult[0m[38;2;248;248;242m<[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m, [0m[38;2;166;226;46mBox[0m[38;2;248;248;242m<[0m[38;2;248;248;242mdyn [0m[38;2;248;248;242mstd[0m[38;2;248;248;242m::[0m[38;2;248;248;242merror[0m[38;2;248;248;242m::[0m[38;2;248;248;242mError[0m[38;2;248;248;242m>[0m[38;2;248;248;242m>[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m file_info [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;102;217;239mprocess_file[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m config[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Detect language if not specified[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m detected_language [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;249;38;114mif[0m[38;2;248;248;242m config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlanguage[0m[38;2;248;248;242m.[0m[38;2;102;217;239mis_some[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlanguage[0m[38;2;248;248;242m.[0m[38;2;102;217;239mclone[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m[38;2;248;248;242m [0m[38;2;249;38;114melse[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;102;217;239mdetect_language[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m)[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m [0m[38;2;249;38;114mmut[0m[38;2;248;248;242m output [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;248;248;242mjson![0m[38;2;248;248;242m([0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mfile[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_path[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mlines[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mlines[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mtotal_lines[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtotal_lines[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mtotal_bytes[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtotal_bytes[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mtruncated[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtruncated[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mtruncated_by_lines[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtruncated_by_lines[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mtruncated_by_bytes[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtruncated_by_bytes[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mlanguage[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m detected_language[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mencoding[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mencoding[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116msyntax_errors[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242msyntax_errors[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;230;219;116m"[0m[38;2;230;219;116mmode[0m[38;2;230;219;116m"[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;230;219;116m"[0m[38;2;230;219;116mjson[0m[38;2;230;219;116m"[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Add optional fields[0m
[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m [0m[38;2;166;226;46mSome[0m[38;2;248;248;242m([0m[38;2;248;248;242mtokens[0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;249;38;114m=[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtokens [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        output[0m[38;2;248;248;242m[[0m[38;2;230;219;116m"[0m[38;2;230;219;116mtokens[0m[38;2;230;219;116m"[0m[38;2;248;248;242m][0m[38;2;248;248;242m [0m[38;2;249;38;114m=[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mserde_json[0m[38;2;248;248;242m::[0m[38;2;248;248;242mValue[0m[38;2;248;248;242m::[0m[38;2;248;248;242mArray[0m[38;2;248;248;242m([0m[38;2;248;248;242mtokens[0m[38;2;248;248;242m.[0m[38;2;102;217;239minto_iter[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m.[0m[38;2;102;217;239mmap[0m[38;2;248;248;242m([0m[38;2;248;248;242mserde_json[0m[38;2;248;248;242m::[0m[38;2;248;248;242mValue[0m[38;2;248;248;242m::[0m[38;2;248;248;242mString[0m[38;2;248;248;242m)[0m[38;2;248;248;242m.[0m[38;2;102;217;239mcollect[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m [0m[38;2;166;226;46mSome[0m[38;2;248;248;242m([0m[38;2;248;248;242msummary_lines[0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;249;38;114m=[0m[38;2;248;248;242m file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242msummary_lines [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        output[0m[38;2;248;248;242m[[0m[38;2;230;219;116m"[0m[38;2;230;219;116msummary_lines[0m[38;2;230;219;116m"[0m[38;2;248;248;242m][0m[38;2;248;248;242m [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;248;248;242mserde_json[0m[38;2;248;248;242m::[0m[38;2;248;248;242mValue[0m[38;2;248;248;242m::[0m[38;2;248;248;242mArray[0m[38;2;248;248;242m([0m
[38;2;248;248;242m            summary_lines[0m
[38;2;248;248;242m                [0m[38;2;248;248;242m.[0m[38;2;102;217;239minto_iter[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m
[38;2;248;248;242m                [0m[38;2;248;248;242m.[0m[38;2;102;217;239mmap[0m[38;2;248;248;242m([0m[38;2;248;248;242mserde_json[0m[38;2;248;248;242m::[0m[38;2;248;248;242mValue[0m[38;2;248;248;242m::[0m[38;2;248;248;242mString[0m[38;2;248;248;242m)[0m
[38;2;248;248;242m                [0m[38;2;248;248;242m.[0m[38;2;102;217;239mcollect[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;248;248;242mserde_json[0m[38;2;248;248;242m::[0m[38;2;248;248;242mto_string_pretty[0m[38;2;248;248;242m([0m[38;2;249;38;114m&[0m[38;2;248;248;242moutput[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m
[38;2;248;248;242m}[0m

[38;2;102;217;239mfn[0m[38;2;248;248;242m [0m[38;2;166;226;46mhandle_summary_output[0m[38;2;248;248;242m([0m
[38;2;248;248;242m    [0m[38;2;253;151;31mfile_path[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;102;217;239mstr[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m    [0m[38;2;253;151;31mconfig[0m[38;2;248;248;242m:[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mBatlessConfig,[0m
[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m->[0m[38;2;248;248;242m [0m[38;2;166;226;46mResult[0m[38;2;248;248;242m<[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m, [0m[38;2;166;226;46mBox[0m[38;2;248;248;242m<[0m[38;2;248;248;242mdyn [0m[38;2;248;248;242mstd[0m[38;2;248;248;242m::[0m[38;2;248;248;242merror[0m[38;2;248;248;242m::[0m[38;2;248;248;242mError[0m[38;2;248;248;242m>[0m[38;2;248;248;242m>[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m [0m[38;2;249;38;114mmut[0m[38;2;248;248;242m summary_config [0m[38;2;249;38;114m=[0m[38;2;248;248;242m config[0m[38;2;248;248;242m.[0m[38;2;102;217;239mclone[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    summary_config[0m[38;2;248;248;242m.[0m[38;2;248;248;242msummary_mode [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;190;132;255mtrue[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Make sure we get all lines for proper summary extraction[0m
[38;2;248;248;242m    summary_config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mmax_lines [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;102;217;239musize[0m[38;2;248;248;242m::[0m[38;2;190;132;255mMAX[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m file_info [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;102;217;239mprocess_file[0m[38;2;248;248;242m([0m[38;2;248;248;242mfile_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242msummary_config[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m;[0m

[38;2;248;248;242m    [0m[38;2;249;38;114mif[0m[38;2;248;248;242m [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m [0m[38;2;166;226;46mSome[0m[38;2;248;248;242m([0m[38;2;248;248;242msummary_lines[0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;249;38;114m&[0m[38;2;248;248;242mfile_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242msummary_lines [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mif[0m[38;2;248;248;242m summary_lines[0m[38;2;248;248;242m.[0m[38;2;102;217;239mis_empty[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;230;219;116m// No summary-worthy code structures found[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m            [0m[38;2;249;38;114mreturn[0m[38;2;248;248;242m [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m        [0m[38;2;117;113;94m//[0m[38;2;117;113;94m Display only the summary lines, not all content[0m
[38;2;248;248;242m        [0m[38;2;249;38;114mif[0m[38;2;248;248;242m config[0m[38;2;248;248;242m.[0m[38;2;248;248;242muse_color [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m content [0m[38;2;249;38;114m=[0m[38;2;248;248;242m summary_lines[0m[38;2;248;248;242m.[0m[38;2;102;217;239mjoin[0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m\n[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m            [0m[38;2;102;217;239mlet[0m[38;2;248;248;242m highlighted [0m[38;2;249;38;114m=[0m[38;2;248;248;242m [0m[38;2;102;217;239mhighlight_content[0m[38;2;248;248;242m([0m[38;2;249;38;114m&[0m[38;2;248;248;242mcontent[0m[38;2;248;248;242m,[0m[38;2;248;248;242m file_path[0m[38;2;248;248;242m,[0m[38;2;248;248;242m config[0m[38;2;248;248;242m)[0m[38;2;249;38;114m?[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m            [0m[38;2;248;248;242mprint![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{highlighted}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m            [0m[38;2;249;38;114mif[0m[38;2;248;248;242m [0m[38;2;249;38;114m![0m[38;2;248;248;242mcontent[0m[38;2;248;248;242m.[0m[38;2;102;217;239mends_with[0m[38;2;248;248;242m([0m[38;2;230;219;116m'[0m[38;2;190;132;255m\n[0m[38;2;230;219;116m'[0m[38;2;248;248;242m)[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m                [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m            [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m[38;2;248;248;242m [0m[38;2;249;38;114melse[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m            [0m[38;2;249;38;114mfor[0m[38;2;248;248;242m line [0m[38;2;249;38;114min[0m[38;2;248;248;242m summary_lines [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m                [0m[38;2;249;38;114mif[0m[38;2;248;248;242m config[0m[38;2;248;248;242m.[0m[38;2;248;248;242mstrip_ansi [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m                    [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m[38;2;248;248;242m [0m[38;2;248;248;242mstrip_ansi_escapes[0m[38;2;248;248;242m::[0m[38;2;248;248;242mstrip_str[0m[38;2;248;248;242m([0m[38;2;248;248;242mline[0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m                [0m[38;2;248;248;242m}[0m[38;2;248;248;242m [0m[38;2;249;38;114melse[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m                    [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;190;132;255m{line}[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m                [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m            [0m[38;2;248;248;242m}[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m        [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m
[38;2;248;248;242m            [0m[38;2;230;219;116m"[0m[38;2;230;219;116m// Summary: [0m[38;2;190;132;255m{}[0m[38;2;230;219;116m important lines from [0m[38;2;190;132;255m{}[0m[38;2;230;219;116m total lines[0m[38;2;230;219;116m"[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m            summary_lines[0m[38;2;248;248;242m.[0m[38;2;102;217;239mlen[0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m,[0m
[38;2;248;248;242m            file_info[0m[38;2;248;248;242m.[0m[38;2;248;248;242mtotal_lines[0m
[38;2;248;248;242m        [0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m[38;2;248;248;242m [0m[38;2;249;38;114melse[0m[38;2;248;248;242m [0m[38;2;248;248;242m{[0m
[38;2;248;248;242m        [0m[38;2;248;248;242mprintln![0m[38;2;248;248;242m([0m[38;2;230;219;116m"[0m[38;2;230;219;116m// No summary available[0m[38;2;230;219;116m"[0m[38;2;248;248;242m)[0m[38;2;248;248;242m;[0m
[38;2;248;248;242m    [0m[38;2;248;248;242m}[0m

[38;2;248;248;242m    [0m[38;2;166;226;46mOk[0m[38;2;248;248;242m([0m[38;2;248;248;242m([0m[38;2;248;248;242m)[0m[38;2;248;248;242m)[0m
[38;2;248;248;242m}[0m
